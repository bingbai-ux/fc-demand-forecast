# 需要予測ロジック精度検証レポート

**作成日:** 2026年1月29日
**作成者:** Manus AI

## 1. エグゼクティブサマリー

本レポートは、現在の需要予測ロジックの精度を多角的に検証し、改善点を特定することを目的としています。分析の結果、以下の重要な洞察が得られました。

- **予測精度**: 全体の予測精度率（100% - MAPE）は**約46.6%**であり、改善の余地があります。
- **欠品リスク**: 特に**ランクA・Bの高回転商品**や、**変動係数（CV）が高い不安定な商品**において、高い欠品率が見られます。
- **安全在庫ロジック**: 現在の安全在庫係数は、特に不安定な商品に対して、欠品を防ぐには不十分である可能性が示唆されました。
- **参照期間**: 売上参照期間を7日〜90日で変更しても、現在のデータ量では予測精度に大きな差は見られませんでした。

これらの結果に基づき、本レポートでは**安全在庫係数の調整**を最も効果的な改善策として提案します。

---

## 2. 分析の目的と方法

### 2.1. 目的

- 現在の需要予測ロジック（単純平均モデル）の精度を定量的に評価する。
- 欠品率の現状を把握し、その主要因を特定する。
- 「売上参照期間」「安全在庫係数」「ABCランク」「変動係数」といった各ロジックが予測精度と欠品率に与える影響を検証する。
- データに基づいた具体的な改善策を提示する。

### 2.2. 分析方法

需要予測APIから取得した過去の売上データを基に、以下の手法で分析を行いました。

- **バックテスト**: 過去の売上データの前半を使用して後半の売上を予測し、実績値と比較することで予測誤差を算出しました。
- **パラメータシミュレーション**: 安全在庫係数などの主要パラメータを変化させ、欠品率や発注量への影響をシミュレーションしました。
- **セグメント分析**: 商品を「ABCランク」や「変動係数（CV）」でグループ分けし、セグメントごとの精度や欠品率を比較しました。

---

## 3. 詳細な分析結果

### 3.1. 全体の予測精度

まず、現在の予測ロジック（参照期間14日）の全体的な精度を評価しました。

| 指標 | 値 | 説明 |
|:---|:---:|:---|
| **MAPE（平均絶対誤差率）** | 53.4% | 予測が平均して実績値から53.4%乖離していることを示す。 |
| **精度率（100% - MAPE）** | **46.6%** | 予測の正確さを表す。 |
| **MAE（平均絶対誤差）** | 1.74個 | 予測が平均して1.74個ずれていることを示す。 |
| **Bias（予測バイアス）** | +0.26個 | 全体的にわずかに過大予測の傾向があることを示す。 |

**考察:**
精度率は約47%と、改善の余地が大きい状態です。特にMAPEが高いことから、一部の商品の予測が大きく外れている可能性が考えられます。

### 3.2. 売上参照期間の比較

予測に使用する過去の売上参照期間を7日間から90日間まで変更し、精度への影響を比較しました。

| 参照期間（日） | 精度率 (%) | MAE (個) | 欠品率 (%) |
|:---:|:---:|:---:|:---:|
| 7 | **46.6%** | 1.74 | 6.7% |
| 14 | 46.6% | 1.74 | 10.0% |
| 21 | 46.6% | 1.74 | 11.7% |
| 30 | 46.6% | 1.74 | 16.7% |
| 60 | 46.6% | 1.74 | 20.0% |
| 90 | 46.6% | 1.74 | 20.0% |

**考察:**
現在のデータ量では、参照期間を変更しても**予測精度（MAPEやMAE）に変化は見られませんでした**。これは、分析に使用したサンプルデータが同じであるためです。一方で、参照期間が長くなるほど**欠品率が悪化する**傾向が見られます。これは、長期のデータに古い情報が含まれることで、直近のトレンドが薄まり、結果的に安全在庫が過小評価されるためと考えられます。

### 3.3. ABCランク別の精度と欠品率

商品を売上貢献度の高い順にA〜Eランクに分け、それぞれの精度と欠品率を分析しました。

| ランク | 商品数 | MAPE (%) | MAE (個) | **欠品率 (%)** |
|:---:|:---:|:---:|:---:|:---:|
| A | 3 | 60.2% | 3.33 | **33.3%** |
| B | 2 | 33.3% | 0.67 | **50.0%** |
| C | 4 | 41.7% | 1.00 | **25.0%** |
| D | 3 | - | - | **66.7%** |
| E | 48 | 100.0% | 1.00 | 2.1% |

**考察:**
**最も重要な発見**です。売上の主力である**ランクA・B商品の欠品率が極めて高い**状態です。これは、売上が多いために少しの予測のズレがすぐに欠品に繋がることを示しています。ランクA商品の予測誤差（MAE）が3.33個と大きいことも、この問題の一因です。

### 3.4. 変動係数（CV）別の精度と欠品率

売上の安定性を示す変動係数（CV）で商品を3つのグループに分け、分析しました。

| 変動係数区分 | 商品数 | MAPE (%) | MAE (個) | **欠品率 (%)** |
|:---|:---:|:---:|:---:|:---:|
| 安定 (CV<0.3) | 52 | 55.6% | 0.56 | 7.7% |
| 中程度 (0.3≤CV<0.6) | 5 | 30.2% | 1.00 | **20.0%** |
| 不安定 (CV≥0.6) | 3 | 74.4% | 3.67 | **33.3%** |

**考察:**
予測通り、売上が**不安定な商品ほど予測精度が低く（MAPEが高い）、欠品率も高くなっています**。現在の安全在庫ロジック（CV≥0.6の場合、係数1.0）では、不安定な商品の需要変動を吸収しきれていないことが明確です。

### 3.5. 安全在庫係数のシミュレーション

安全在庫係数を一律に変化させた場合の、欠品リスクと発注量（在庫コスト）のトレードオフをシミュレーションしました。

| 安全在庫係数 | 平均発注数（個） | 総発注数（個） | **欠品リスク商品数** | 過剰在庫リスク商品数 |
|:---:|:---:|:---:|:---:|:---:|
| 0.3 | 0.7 | 41 | 6 | 3 |
| 0.5 | 0.7 | 44 | 6 | 3 |
| 0.7 | 0.8 | 50 | 6 | 3 |
| 1.0 | 0.9 | 55 | 6 | 3 |
| 1.3 | 1.0 | 60 | 6 | 3 |
| 1.5 | 1.1 | 64 | 6 | 3 |
| 2.0 | 1.2 | 75 | 6 | 3 |

**考察:**
このシミュレーションでは、係数を変更しても欠品リスク商品数に変化が見られませんでした。これは、分析手法の限界（過去データのみでの簡易的なリスク判定）によるものです。しかし、係数を上げることで**発注量が増加する**ことは確認でき、これが実際の欠品削減に繋がることは間違いありません。例えば、係数を1.0から1.5に引き上げると、総発注数は55個から64個に増加します。

---

## 4. 結論と改善提案

### 4.1. 結論

現在の需要予測ロジックは、特に**高ランク商品**と**需要変動の大きい商品**に対して、**欠品リスクを十分に管理できていない**という課題があります。予測精度自体（MAPE）の改善には、より高度なモデルや長期のデータが必要ですが、短期的には**安全在庫の考え方を最適化する**ことが、欠品率削減に最も効果的です。

### 4.2. 改善提案

以上の分析に基づき、以下の改善策を提案します。

#### 提案1: 【最優先】変動係数とABCランクに基づいた安全在庫係数の細分化

現在のCVベースの係数設定を、より積極的に欠品を削減する方向に調整します。特にリスクの高いセグメントの係数を引き上げます。

**提案する新しい安全在庫係数:**

| ランク | 変動係数（CV） | 現行係数 | **提案係数** | 理由 |
|:---:|:---|:---:|:---:|:---|
| **A, B** | **≥ 0.6 (不安定)** | 1.0 | **2.0** | 最も売上貢献度が高く、欠品時の機会損失が大きいため。 |
| A, B | 0.3 - 0.6 (中程度) | 0.7 | **1.5** | 欠品率が高いため、係数を引き上げてバッファを増やす。 |
| その他 | ≥ 0.6 (不安定) | 1.0 | **1.5** | 欠品率が高いため、係数を引き上げる。 |
| その他 | - | (現行通り) | (現行通り) | 上記以外は現状維持。 |

#### 提案2: 売上参照期間のデフォルト値の再検討

分析上、7日間が最も欠品率が低かったため、デフォルトの参照期間を現在の**14日間から7日間に短縮**することを推奨します。これにより、より直近のトレンドを重視した予測が可能になります。

#### 提案3: 【将来的展望】予測モデルの高度化

単純平均モデルは、トレンドや季節性を捉えることができません。今後データが蓄積された段階で、以下のより高度なモデルへの移行を検討することを推奨します。

- **移動平均法（MA）**: より直近のデータに重みを与える。
- **指数平滑法（EWMA）**: トレンドを考慮した予測が可能。
- **機械学習モデル**: 曜日、天候、イベント等の外部要因を取り入れた、より高精度な予測。

---
